@using ToDoListBlazorClient.Extensions
@inherits LayoutComponentBase
@inject IAccountService AccountService

<div class="page">
    <div class="sidebar">
        <NavMenu/>
    </div>

    <main>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav"></div>
              <div class="navbar-nav ms-auto">
                  <AuthorizeView>
                      <Authorized>
                          <span class="nav-link">Hello @(context.User.GetEmail())!</span>
                          <button class="btn btn-outline-light nav-item" @onclick="Logout">Logout</button>
                      </Authorized>
                      <NotAuthorized>
                          <NavLink class="nav-item nav-link" href="login">Login</NavLink>
                          <NavLink class="nav-item nav-link" href="register">Register</NavLink>
                      </NotAuthorized>
                  </AuthorizeView>
              </div>
          </div>
        </nav>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@code {

    private async Task Logout()
    {
        await AccountService.LogoutAsync();
    }
}
